package cn.hackedmc.alexander.module.impl.exploit;

import cn.hackedmc.alexander.api.Rise;
import cn.hackedmc.alexander.component.impl.player.PingSpoofComponent;
import cn.hackedmc.alexander.module.Module;
import cn.hackedmc.alexander.module.api.Category;
import cn.hackedmc.alexander.module.api.ModuleInfo;
import cn.hackedmc.alexander.newevent.Listener;
import cn.hackedmc.alexander.newevent.annotations.EventLink;
import cn.hackedmc.alexander.newevent.impl.motion.PreUpdateEvent;
import cn.hackedmc.alexander.util.math.MathUtil;
import cn.hackedmc.alexander.value.impl.BooleanValue;
import cn.hackedmc.alexander.value.impl.BoundsNumberValue;

/**
 * @author Alan
 * @since 28/05/2022
 */
@Rise
@ModuleInfo(name = "module.combat.pingspoof.name", description = "module.exploit.pingspoof.description", category = Category.EXPLOIT)
public class PingSpoof extends Module {

    private final BoundsNumberValue delay = new BoundsNumberValue("Delay", this, 1000, 1500, 50, 30000, 1);
    private final BooleanValue teleports = new BooleanValue("Delay Teleports", this, false);
    private final BooleanValue velocity = new BooleanValue("Delay Velocity", this, false);
    private final BooleanValue world = new BooleanValue("Delay Block Updates", this, false);
    private final BooleanValue entities = new BooleanValue("Delay Entity Movements", this, false);

    @EventLink()
    public final Listener<PreUpdateEvent> onPreUpdate = event -> {
        PingSpoofComponent.setSpoofing((int) MathUtil.getRandom(delay.getValue().intValue(), delay.getSecondValue().intValue()),
                true, teleports.getValue(), velocity.getValue(), world.getValue(), entities.getValue());
    };
}
